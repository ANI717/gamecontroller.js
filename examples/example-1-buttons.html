<!DOCTYPE html>
<html lang="en">
  <head>
    <title>GameControl Example: Buttons</title>
    <link rel="stylesheet" href="./examples.css" />
    <style>
      svg {
        display: block;
        margin: 1rem auto;
        max-width: 500px;
        width: 100%;
      }
      .active {
        fill: yellow;
      }
    </style>
  </head>
  <body>
    <main>
      <h1>Example: Buttons</h1>
      <p>
        Connect a gamepad to the computer, and click on the different buttons. They will highlight
        as they are pressed.
      </p>

      <p class="note">
        This is a 17-button
        <a href="https://w3c.github.io/gamepad/#remapping"
          >standard gamepad layout as defined on the W3C Gamepad API definition</a
        >. <strong>It may not match the gamepad that is connected</strong>, but it can be used to
        see how the buttons in that gamepad match the buttons in the standard gamepad.
      </p>

      <svg viewBox="0 0 600 300">
        <g fill="#ddd" stroke="#222" stroke-width="3">
          <rect x="150" y="10" width="100" height="100" rx="5" ry="5" id="button-6" />
          <rect x="350" y="10" width="100" height="100" rx="5" ry="5" id="button-7" />
          <rect x="100" y="25" width="100" height="40" rx="5" ry="5" id="button-4" />
          <rect x="400" y="25" width="100" height="40" rx="5" ry="5" id="button-5" />
          <path
            d="M135,50 C 45,50 20,180 20,240 20,300 80,330 175,220 175,220 
          425,220 425,220 520,330 580,300 580,240 580,180 555,50 465,50 Z"
          />
          <circle cx="200" cy="200" r="35" />
          <circle cx="400" cy="200" r="35" />
          <circle cx="200" cy="200" r="15" id="button-10" />
          <circle cx="400" cy="200" r="15" id="button-11" />

          <circle cx="480" cy="160" r="15" id="button-0" />
          <circle cx="510" cy="130" r="15" id="button-1" />
          <circle cx="450" cy="130" r="15" id="button-2" />
          <circle cx="480" cy="100" r="15" id="button-3" />

          <rect x="105" y="85" width="30" height="90" fill="#aaa" stroke="#aaa" />
          <rect x="75" y="115" width="90" height="30" fill="#aaa" stroke="#aaa" />

          <rect x="245" y="145" width="50" height="18" rx="9" ry="9" id="button-8" />
          <rect x="305" y="145" width="50" height="18" rx="9" ry="9" id="button-9" />

          <circle cx="120" cy="160" r="15" id="button-13" />
          <circle cx="90" cy="130" r="15" id="button-14" />
          <circle cx="150" cy="130" r="15" id="button-15" />
          <circle cx="120" cy="100" r="15" id="button-12" />

          <circle cx="300" cy="90" r="20" id="button-16" />
        </g>
        <g
          dominant-baseline="middle"
          text-anchor="middle"
          fill="#222"
          font-size="16"
          font-family="Arial,sans-serif"
        >
          <text x="480" y="160">0</text>
          <text x="510" y="130">1</text>
          <text x="450" y="130">2</text>
          <text x="480" y="100">3</text>
          <text x="150" y="40">4</text>
          <text x="450" y="40">5</text>
          <text x="225" y="30">6</text>
          <text x="375" y="30">7</text>
          <text x="270" y="156">8</text>
          <text x="330" y="156">9</text>
          <text x="200" y="200">10</text>
          <text x="400" y="200">11</text>
          <text x="120" y="100">12</text>
          <text x="120" y="160">13</text>
          <text x="90" y="130">14</text>
          <text x="150" y="130">15</text>
          <text x="300" y="90">16</text>
          <text x="270" y="175" font-size="10">SELECT</text>
          <text x="330" y="175" font-size="10">START</text>
        </g>
      </svg>

      <p class="note">
        In the Gamepad API, the joystick/axes are not considered buttons, so they will be processed
        in a different way. Visit <a href="./example-2-axes.html">the second example</a> to see how
        the axes are handled in this library.
      </p>

      <h2>How it works</h2>

      <p>As an example, here is the code that manages the interaction above:</p>
      <pre class="code"><code>gameControl.on('connect', function() {
  document.querySelector('#round-button').className = 'connected';
  document.querySelector('#status').textContent = 'Device connected!';
});

gameControl.on('disconnect', function() {
  document.querySelector('#round-button').className = 'disconnected';
  document.querySelector('#status').textContent = 'Device disconnected!';
});</code></pre>
    </main>
    <script src="../dist/gamecontrol.js"></script>
    <script>
      gameControl
        .on('connect', function(gp) {
          for (let x = 0; x < gp.buttons; x++) {
            gp.on('button' + x, function() {
              document.querySelector('#button-' + x).classList.toggle('active', true);
            });
          }
        })
        .on('beforeCycle', function() {
          const active = document.querySelectorAll('.active');
          for (let x = 0; x < active.length; x++) {
            active[x].classList.toggle('active', false);
          }
        });
    </script>
  </body>
</html>
